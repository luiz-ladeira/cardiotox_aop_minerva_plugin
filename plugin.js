!function r(o,i,a){function s(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){function a(e,t){var n=document.head||document.getElementsByTagName("head")[0],r=o[o.length-1];if((t=t||{}).insertAt=t.insertAt||"bottom","top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),o.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}var o=[];t.exports={createLink:function(e,t){var n,r,o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");for(n in i.href=e,i.rel="stylesheet",t)t.hasOwnProperty(n)&&(r=t[n],i.setAttribute("data-"+n,r));o.appendChild(i)},createStyle:function(e,t,n){n=n||{};var r,o,i=document.createElement("style");for(r in i.type="text/css",t)t.hasOwnProperty(r)&&(o=t[r],i.setAttribute("data-"+r,o));i.sheet?(i.innerHTML=e,i.sheet.cssText=e,a(i,{insertAt:n.insertAt})):i.styleSheet?(a(i,{insertAt:n.insertAt}),i.styleSheet.cssText=e):(i.appendChild(document.createTextNode(e)),a(i,{insertAt:n.insertAt}))}}},{}],2:[function(e,t,n){var c,d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=t,r=[],o=!0,t=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(r.push(a.value),!n||r.length!==n);o=!0);}catch(e){t=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(t)throw i}}return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},e=(e("./styles.css"),"1lYtwYLNLfGlhj7gbbkaNCwYNsuGKM5L6uJSydlXEGLE"),r="AIzaSyAIaStdq_ebxgOE7l5K5mBrBSRrf3Ywayg",u="https://docs.google.com/spreadsheets/d/"+e;c=window.minerva.plugins.registerPlugin({pluginName:"KE Mapper",pluginVersion:"1.0.0",pluginUrl:window.minerva.pluginUrl}).element,Promise.all([fetch("https://sheets.googleapis.com/v4/spreadsheets/"+e+"/values/Sheet1?key="+r).then(function(e){if(e.ok)return e.json();throw new Error("Sheet fetch failed: "+e.statusText)}),window.minerva.project.data.getAllBioEntities()]).then(function(e){var n,t,r,o,i,e=d(e,2),a=e[0],e=e[1],a=((e,t)=>{var n=e.values[0].indexOf(t);if(-1===n)throw new Error('Column "'+t+'" not found');return{idx:n,rows:e.values.slice(1)}})(a,"ke_name"),s=a.rows,l=a.idx,a=s.map(function(e){return e[l]}).filter(Boolean),s=(n=e,a.map(function(t){var e=n.find(function(e){return e.getName()===t});return e?{ke:t,be:e}:null}).filter(Boolean));e=c,a=s,(e=$(c)).empty(),s=$('\n    <div class="d-flex justify-content-between mb-2">\n      <input type="text" id="search-box" class="form-control form-control-sm w-50" placeholder="Search KE name...">\n      <button class="btn btn-sm btn-primary" id="access-data-btn">Access data</button>\n    </div>\n  '),t=$('<div class="table-wrapper"></div>'),r=$('<table class="table table-bordered table-sm"></table>'),o=$("<thead><tr><th>KE Name</th><th>Type</th><th>Model</th></tr></thead>"),i=$("<tbody></tbody>"),a.forEach(function(e){var t=e.ke,n=e.be,e=$("<tr>\n      <td>"+t+"</td>\n      <td>"+n.getType()+"</td>\n      <td>"+n.getModelId()+"</td>\n    </tr>");e.on("click",function(){window.minerva.project.map.showBioEntity({id:n.getId(),modelId:n.getModelId(),type:n.getType()})}),i.append(e)}),r.append(o).append(i),t.append(r),e.append(s,t),$("#access-data-btn").on("click",function(){return window.open(u,"_blank")}),$("#search-box").on("input",function(){var t=$(this).val().toLowerCase();i.find("tr").each(function(){var e=$(this).find("td:first").text().toLowerCase();$(this).toggle(e.includes(t))})})}).catch(function(e){$(c).html('<p style="color:red;">'+e.message+"</p>"),console.error(e)})},{"./styles.css":3}],3:[function(e,t,n){var r=".table-wrapper {\n  overflow-x: auto;\n  overflow-y: auto;\n  max-height: 400px;\n}\ntd,\nth {\n  white-space: nowrap;\n}\n/*# sourceMappingURL=styles.css.map */\n";e("browserify-css").createStyle(r,{href:"src\\js\\styles.css"},{insertAt:"bottom"}),t.exports=r},{"browserify-css":1}]},{},[2]);
